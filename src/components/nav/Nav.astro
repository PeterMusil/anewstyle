---
import NavItem from "./NavItem.astro";
import LangSwitch from "../langSwitch/LangSwitch.astro";
import Icon from "../icons/Icon.astro";
---

<nav>
  <div class="nav__container">
    <a href="/" class="logo" rel="noopener">
      <img src="./images/logos/logo.svg" alt="Anew Style Logo" height="96" />
    </a>
    <ul class="menu">
      <NavItem href="#about" text="nav_light" icon="bulp" />
      <NavItem
        href="#products"
        text="nav_products"
        icon="ar"
        iconClass="icon-nav"
      />
      <NavItem href="#features" text="nav_features" />
      <NavItem href="#price-list" text="nav_price" />
      <NavItem href="#showroom" text="nav_gallery" />
      <NavItem href="#contact" text="nav_contact" />
      <NavItem
        href="http://www.anewstyle-eshop.cz/"
        rel="external"
        text="nav_eshop"
        icon="eshop-light"
        target="_blank"
      />
      <LangSwitch />
    </ul>
    <button aria-label="Mobile menu" class="burger" id="menuBtn">
      <Icon name="menu" />
    </button>
  </div>
</nav>

<script>
  const menu = document.querySelector(".menu") as HTMLUListElement;
  const burger = document.querySelector("#menuBtn") as HTMLButtonElement;
  const body = document.body as HTMLBodyElement;
  const navItems = document.querySelectorAll(
    ".menu > li > a"
  ) as NodeListOf<HTMLAnchorElement>;

  burger &&
    menu &&
    burger.addEventListener("click", () => {
      const isOpen = menu.getAttribute("data-open") === "true";
      menu.setAttribute("data-open", String(!isOpen));
      body.classList.toggle("overflow-hidden", !isOpen);
    });

  menu &&
    navItems.forEach((item) => {
      item.addEventListener("click", () => {
        menu.setAttribute("data-open", "false");
        body.classList.remove("overflow-hidden");
      });
    });
</script>
