---
import Card from "../product/Card.astro";
import DetailDialog from "../product/DetailDialog.astro";

const { id } = Astro.props;
const products = await Astro.glob("../../content/products/*.md");
---

<section id={id} class="dark">
  <div class="container">
    <h2 class="title title--center">Produkty</h2>
    <p class="desc text-center">Lorem ipsum dolor sit amet consectetur adipisicing elit. <b>Eligendi asperiores</b>, ut possimus, tenetur itaque aliquam, atque laudantium quibusdam vero amet rerum ab pariatur unde minus?</p>
    <div class="product-list">
      {
        products.map((product) => {
          const data = product.frontmatter;

          return (
            <div class="product">
              <Card id={data.id} title={data.title} img={data.img} />
              <DetailDialog id={data.id} title={data.title} desc={data.desc} content={product.compiledContent()} img={data.img} model3d={data.model3d} />
            </div>
          );
        })
      }
    </div>
  </div>
</section>
